"use strict";(self.webpackChunkoc_studio_docs=self.webpackChunkoc_studio_docs||[]).push([[7794],{1350:function(e,t,n){n.r(t),n.d(t,{assets:function(){return a},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return d}});var s=n(5893),r=n(1151);const o={title:"Storage",sidebar_label:"Storage"},i=void 0,l={id:"development/storage",title:"Storage",description:"There are two types of storage available to you during development; session storage and permanent storage.  Both of these are available on the context object passed through to the handler functions.",source:"@site/docs/development/storage.md",sourceDirName:"development",slug:"/development/storage",permalink:"/docs/development/storage",draft:!1,unlisted:!1,editUrl:"https://github.com/xapp-ai/documentation/edit/main/docs/development/storage.md",tags:[],version:"current",frontMatter:{title:"Storage",sidebar_label:"Storage"},sidebar:"docs",previous:{title:"Context",permalink:"/docs/development/context"},next:{title:"Templated Responses",permalink:"/docs/development/compiling-templated-responses"}},a={},d=[{value:"Session Storage",id:"session-storage",level:2},{value:"Session Values Managed by Stentor",id:"session-values-managed-by-stentor",level:3},{value:"Permanent Storage",id:"permanent-storage",level:2},{value:"Values Managed by Stentor",id:"values-managed-by-stentor",level:3}];function c(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"There are two types of storage available to you during development; session storage and permanent storage.  Both of these are available on the context object passed through to the handler functions."}),"\n",(0,s.jsx)(t.h2,{id:"session-storage",children:"Session Storage"}),"\n",(0,s.jsx)(t.p,{children:"Session storage persist only as long as the session.  Stentor will automatically purge and create a new session storage once the session ends and a new one begins."}),"\n",(0,s.jsx)(t.p,{children:"The session storage is on the context object available to the handler."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'\n    public async handleRequest(request: Request, context: Context): Promise<void> {\n\n        const sessionSlots = context.session.get("slots");\n\n        context.session.set("current_state", 2);\n\n    }\n\n'})}),"\n",(0,s.jsx)(t.h3,{id:"session-values-managed-by-stentor",children:"Session Values Managed by Stentor"}),"\n",(0,s.jsx)(t.p,{children:"Stentor will manage a couple of session values for you.  Feel free to access these however editing them may cause unexpected behavior."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Key"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"right"},children:"Values"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"new_user"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"True if the user is brand new"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"true, false"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"unknownInputs"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Current number of consecutive UnknownInputs received"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"0, 1, 2"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"slots"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Current slots received throughout the entire session"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"Object with all slot values"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"permanent-storage",children:"Permanent Storage"}),"\n",(0,s.jsx)(t.p,{children:"Permanent storage persists indefinitely and is saved within the user table.  The permanent storage also contains the session storage but it's lifecycle is managed by stentor.  The storage can be accessed directly on the context object."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"\n    public async handleRequest(request: Request, context: Context): Promise<void> {\n\n        const lifetimeScore = context.storage.score;\n\n        // Later, update the score\n\n        context.storage.score = lifetimeScore + 1;\n\n    }\n\n"})}),"\n",(0,s.jsx)(t.h3,{id:"values-managed-by-stentor",children:"Values Managed by Stentor"}),"\n",(0,s.jsx)(t.p,{children:"Stentor will manage a couple of permanent values for you that you have access to."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Key"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"right"},children:"Values"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"createdTimestamp"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"When the user first used the assistant"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"ISO-8601 string"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"lastActiveTimestamp"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"When the user was last seen by the assistant"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"ISO-8601 string"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"currentHandler"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"The current active handler"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"Handler object"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"previousHandler"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"The previous handler before the current one"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"Handler object"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"previousResponse"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"The previous response given to the user"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"Response object"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"sessionStore"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"The session storage data and metadata"}),(0,s.jsx)(t.td,{style:{textAlign:"right"},children:"SessionStorageData object"})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},1151:function(e,t,n){n.d(t,{Z:function(){return l},a:function(){return i}});var s=n(7294);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);